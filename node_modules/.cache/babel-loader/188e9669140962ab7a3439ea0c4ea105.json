{"ast":null,"code":"import _regeneratorRuntime from\"/home/cf/Documentos/nlw/react-app-nlw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/cf/Documentos/nlw/react-app-nlw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/cf/Documentos/nlw/react-app-nlw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{createContext,useEffect,useState}from\"react\";import{auth,firebase}from\"../services/firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";export var AuthContext=/*#__PURE__*/createContext({});export function AuthContextProvider(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];useEffect(function(){var unsubscribe=auth.onAuthStateChanged(function(user){if(user){var displayName=user.displayName,photoURL=user.photoURL,uid=user.uid;if(!displayName){throw new Error('Missin information from Google Account.');}setUser({id:uid,name:displayName,avatar:photoURL});}});return function(){unsubscribe();};},[]);function singInWithGoogle(){return _singInWithGoogle.apply(this,arguments);}function _singInWithGoogle(){_singInWithGoogle=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var provider,result,_result$user,displayName,photoURL,uid;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:provider=new firebase.auth.GoogleAuthProvider();_context.next=3;return auth.signInWithPopup(provider);case 3:result=_context.sent;if(!result.user){_context.next=9;break;}_result$user=result.user,displayName=_result$user.displayName,photoURL=_result$user.photoURL,uid=_result$user.uid;if(displayName){_context.next=8;break;}throw new Error('Missin information from Google Account.');case 8:setUser({id:uid,name:displayName,avatar:photoURL});case 9:case\"end\":return _context.stop();}}},_callee);}));return _singInWithGoogle.apply(this,arguments);}return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user:user,singInWithGoogle:singInWithGoogle},children:props.children});}","map":{"version":3,"sources":["/home/cf/Documentos/nlw/react-app-nlw/src/contexts/AuthContext.js"],"names":["createContext","useEffect","useState","auth","firebase","AuthContext","AuthContextProvider","props","user","setUser","unsubscribe","onAuthStateChanged","displayName","photoURL","uid","Error","id","name","avatar","singInWithGoogle","provider","GoogleAuthProvider","signInWithPopup","result","children"],"mappings":"idAAA,OAASA,aAAT,CAAwBC,SAAxB,CAAmCC,QAAnC,KAAmD,OAAnD,CACA,OAASC,IAAT,CAAeC,QAAf,KAA8B,sBAA9B,C,2CAGA,MAAO,IAAMC,CAAAA,WAAW,cAAGL,aAAa,CAAC,EAAD,CAAjC,CAKP,MAAO,SAASM,CAAAA,mBAAT,CAA6BC,KAA7B,CAAmC,eAEbL,QAAQ,EAFK,wCAE/BM,IAF+B,eAEzBC,OAFyB,eAGtCR,SAAS,CAAC,UAAM,CACd,GAAMS,CAAAA,WAAW,CAAGP,IAAI,CAACQ,kBAAL,CAAwB,SAAAH,IAAI,CAAI,CAClD,GAAGA,IAAH,CAAQ,IACCI,CAAAA,WADD,CACgCJ,IADhC,CACCI,WADD,CACeC,QADf,CACgCL,IADhC,CACeK,QADf,CACyBC,GADzB,CACgCN,IADhC,CACyBM,GADzB,CAEN,GAAG,CAACF,WAAJ,CAAgB,CACd,KAAM,IAAIG,CAAAA,KAAJ,CAAW,yCAAX,CAAN,CACD,CACHN,OAAO,CAAC,CACNO,EAAE,CAACF,GADG,CAENG,IAAI,CAACL,WAFC,CAGNM,MAAM,CAACL,QAHD,CAAD,CAAP,CAKC,CACF,CAZmB,CAApB,CAcF,MAAO,WAAM,CACXH,WAAW,GACZ,CAFD,CAIC,CAnBQ,CAmBN,EAnBM,CAAT,CAHsC,QAwBtBS,CAAAA,gBAxBsB,0JAwBrC,6LACSC,QADT,CACoB,GAAIhB,CAAAA,QAAQ,CAACD,IAAT,CAAckB,kBAAlB,EADpB,uBAEwBlB,CAAAA,IAAI,CAACmB,eAAL,CAAqBF,QAArB,CAFxB,QAESG,MAFT,mBAGEA,MAAM,CAACf,IAHT,sCAIuCe,MAAM,CAACf,IAJ9C,CAIQI,WAJR,cAIQA,WAJR,CAIsBC,QAJtB,cAIsBA,QAJtB,CAIgCC,GAJhC,cAIgCA,GAJhC,IAKKF,WALL,8BAMS,IAAIG,CAAAA,KAAJ,CAAW,yCAAX,CANT,QAQDN,OAAO,CAAC,CACNO,EAAE,CAACF,GADG,CAENG,IAAI,CAACL,WAFC,CAGNM,MAAM,CAACL,QAHD,CAAD,CAAP,CARC,sDAxBqC,mDA4CtC,mBACI,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAE,CAAEL,IAAI,CAAJA,IAAF,CAAOW,gBAAgB,CAAhBA,gBAAP,CAA7B,UACKZ,KAAK,CAACiB,QADX,EADJ,CAMH","sourcesContent":["import { createContext, useEffect, useState } from \"react\"\nimport { auth ,firebase} from \"../services/firebase\"\n\n\nexport const AuthContext = createContext({})\n\n\n\n\nexport function AuthContextProvider(props){\n\n    const [user, setUser ] = useState()\n    useEffect(() => {\n      const unsubscribe = auth.onAuthStateChanged(user => {\n        if(user){\n          const {displayName , photoURL, uid} = user\n          if(!displayName){\n            throw new Error ('Missin information from Google Account.')\n          }\n        setUser({\n          id:uid,\n          name:displayName,\n          avatar:photoURL\n        })\n        }\n      })\n    \n    return () => {\n      unsubscribe()\n    }\n    \n    }, [])\n    \n     async function singInWithGoogle(){\n        const provider = new firebase.auth.GoogleAuthProvider()\n        const result = await auth.signInWithPopup(provider)\n    if(result.user) {\n      const {displayName , photoURL, uid} = result.user\n      if(!displayName){\n        throw new Error ('Missin information from Google Account.')\n      }\n    setUser({\n      id:uid,\n      name:displayName,\n      avatar:photoURL\n    })\n    \n    \n    \n    }\n        }\n    \n\n    return(\n        <AuthContext.Provider value={{ user,singInWithGoogle}}>\n            {props.children}\n</AuthContext.Provider>\n\n    )\n}"]},"metadata":{},"sourceType":"module"}