{"ast":null,"code":"import _regeneratorRuntime from\"/home/cf/Documentos/nlw/react-app-nlw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/cf/Documentos/nlw/react-app-nlw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/cf/Documentos/nlw/react-app-nlw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import illustrationImg from\"../images/illustration.svg\";import logoImg from\"../images/logo.svg\";import googleIconImg from\"../images/google-icon.svg\";import'.././styles/auth.scss';import{Button}from'../components/Button';import{useHistory}from'react-router-dom';import{AuthContext}from'../contexts/AuthContext';import{useContext,useState}from'react';import{database}from'../services/firebase';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function Home(){var history=useHistory();var _useContext=useContext(AuthContext),user=_useContext.user,singInWithGoogle=_useContext.singInWithGoogle;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),roomCode=_useState2[0],setRoomCode=_useState2[1];function handleCreateRoom(){return _handleCreateRoom.apply(this,arguments);}function _handleCreateRoom(){_handleCreateRoom=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(user){_context.next=3;break;}_context.next=3;return singInWithGoogle();case 3:history.push('/rooms/new');case 4:case\"end\":return _context.stop();}}},_callee);}));return _handleCreateRoom.apply(this,arguments);}function handleJoinRoom(_x){return _handleJoinRoom.apply(this,arguments);}function _handleJoinRoom(){_handleJoinRoom=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var roomRef;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();if(!(roomCode.trim()==='')){_context2.next=3;break;}return _context2.abrupt(\"return\");case 3:_context2.next=5;return database.ref(\"rooms/\".concat(roomCode)).get();case 5:roomRef=_context2.sent;if(roomRef.exists()){_context2.next=9;break;}alert('Room does not exists.');return _context2.abrupt(\"return\");case 9:if(!roomRef.val().endedAt){_context2.next=12;break;}alert('Sala encerrada pelo admin');return _context2.abrupt(\"return\");case 12:history.push(\"rooms/\".concat(roomCode));case 13:case\"end\":return _context2.stop();}}},_callee2);}));return _handleJoinRoom.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{id:\"page-auth\",children:[/*#__PURE__*/_jsxs(\"aside\",{children:[/*#__PURE__*/_jsx(\"img\",{src:illustrationImg,alt:\"Perguntas e Respostas\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"Crie salas de Q&A ao-vivo \"}),/*#__PURE__*/_jsx(\"p\",{children:\"Tire as d\\xFAvidas da sua audi\\u1EBDncia em tempo- real \"})]}),/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"main-content\",children:[/*#__PURE__*/_jsx(\"img\",{src:logoImg,alt:\"logo-letmeask\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleCreateRoom,className:\"create-room\",children:[/*#__PURE__*/_jsx(\"img\",{src:googleIconImg,alt:\"google\"}),\"Crie sua sala com o Google\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"separator\",children:\"ou entre em uma sala\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleJoinRoom,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Digite o c\\xF3dico da sala\",onChange:function onChange(event){return setRoomCode(event.target.value);},value:roomCode}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Entrar na sala\"})]})]})})]});}","map":{"version":3,"sources":["/home/cf/Documentos/nlw/react-app-nlw/src/pages/Home.js"],"names":["Button","useHistory","AuthContext","useContext","useState","database","Home","history","user","singInWithGoogle","roomCode","setRoomCode","handleCreateRoom","push","handleJoinRoom","event","preventDefault","trim","ref","get","roomRef","exists","alert","val","endedAt","illustrationImg","logoImg","googleIconImg","target","value"],"mappings":"smBAGA,MAAO,uBAAP,CACA,OAASA,MAAT,KAAuB,sBAAvB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,WAAT,KAA4B,yBAA5B,CACA,OAASC,UAAT,CAAqBC,QAArB,KAAoC,OAApC,CACA,OAASC,QAAT,KAAyB,sBAAzB,C,wFAGA,MAAO,SAASC,CAAAA,IAAT,EAAe,CAElB,GAAMC,CAAAA,OAAO,CAAGN,UAAU,EAA1B,CAFkB,gBAIaE,UAAU,CAACD,WAAD,CAJvB,CAIfM,IAJe,aAIfA,IAJe,CAIRC,gBAJQ,aAIRA,gBAJQ,eAMSL,QAAQ,CAAC,EAAD,CANjB,wCAMfM,QANe,eAMNC,WANM,uBASJC,CAAAA,gBATI,0JASpB,sIACIJ,IADJ,+CAEQC,CAAAA,gBAAgB,EAFxB,QAIUF,OAAO,CAACM,IAAR,CAAa,YAAb,EAJV,sDAToB,2DAoBPC,CAAAA,cApBO,sJAoBtB,kBAA8BC,KAA9B,kIACIA,KAAK,CAACC,cAAN,GADJ,KAGON,QAAQ,CAACO,IAAT,KAAmB,EAH1B,2FAM0BZ,CAAAA,QAAQ,CAACa,GAAT,iBAAsBR,QAAtB,GAAkCS,GAAlC,EAN1B,QAMUC,OANV,mBAOQA,OAAO,CAACC,MAAR,EAPR,0BAQQC,KAAK,CAAC,uBAAD,CAAL,CARR,6CAYGF,OAAO,CAACG,GAAR,GAAcC,OAZjB,2BAaIF,KAAK,CAAC,2BAAD,CAAL,CAbJ,0CAiBIf,OAAO,CAACM,IAAR,iBAAsBH,QAAtB,GAjBJ,yDApBsB,iDAyCtB,mBACA,aAAK,EAAE,CAAC,WAAR,wBACA,sCACA,YAAK,GAAG,CAAEe,eAAV,CAA2B,GAAG,CAAC,uBAA/B,EADA,cAEI,sDAFJ,cAGI,+EAHJ,GADA,cAUA,mCACA,aAAK,SAAS,CAAC,cAAf,wBACA,YAAK,GAAG,CAAEC,OAAV,CAAmB,GAAG,CAAC,eAAvB,EADA,cAEA,gBAAQ,OAAO,CAAEd,gBAAjB,CAAmC,SAAS,CAAC,aAA7C,wBACA,YAAK,GAAG,CAAEe,aAAV,CAAyB,GAAG,CAAC,QAA7B,EADA,gCAFA,cAQA,YAAK,SAAS,CAAC,WAAf,kCARA,cASA,cAAM,QAAQ,CAAEb,cAAhB,wBACI,cACA,IAAI,CAAC,MADL,CAEA,WAAW,CAAC,4BAFZ,CAGA,QAAQ,CAAE,kBAAAC,KAAK,QAAIJ,CAAAA,WAAW,CAACI,KAAK,CAACa,MAAN,CAAaC,KAAd,CAAf,EAHf,CAIA,KAAK,CAAEnB,QAJP,EADJ,cAQA,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,4BARA,GATA,GADA,EAVA,GADA,CAkDC","sourcesContent":["import illustrationImg from '../images/illustration.svg'\nimport logoImg from '../images/logo.svg'\nimport googleIconImg from '../images/google-icon.svg'\nimport '.././styles/auth.scss'\nimport { Button } from '../components/Button'\nimport { useHistory } from 'react-router-dom'\nimport { AuthContext } from '../contexts/AuthContext'\nimport { useContext, useState} from 'react'\nimport { database } from '../services/firebase'\n\n\nexport function Home(){\n\n    const history = useHistory();\n\nconst {user , singInWithGoogle } = useContext(AuthContext)\n\nconst [roomCode,setRoomCode] = useState('')\n\n\n  async  function handleCreateRoom(){\n  if(!user){\n    await singInWithGoogle()\n  }\n            history.push('/rooms/new');\n\n        \n\n    }\n\n\nasync function handleJoinRoom(event){\n    event.preventDefault()\n\n    if(roomCode.trim() ==='') {\n        return\n    }\n    const roomRef = await database.ref(`rooms/${roomCode}`).get()\n    if(!roomRef.exists()){\n        alert('Room does not exists.')\n        return\n    }\n\nif(roomRef.val().endedAt){\n    alert('Sala encerrada pelo admin');\n    return;\n}\n\n    history.push(`rooms/${roomCode}`)\n\n}\n\nreturn(\n<div id=\"page-auth\" >\n<aside>\n<img src={illustrationImg} alt='Perguntas e Respostas' />\n    <strong>Crie salas de Q&amp;A ao-vivo </strong>\n    <p>Tire as dúvidas da sua audiẽncia em tempo- real </p>\n\n\n\n</aside>\n\n<main>\n<div className='main-content' >\n<img src={logoImg} alt='logo-letmeask'/>\n<button onClick={handleCreateRoom} className='create-room' >\n<img src={googleIconImg} alt='google'/>\n\n    Crie sua sala com o Google\n</button>\n\n<div className='separator' >ou entre em uma sala</div>\n<form onSubmit={handleJoinRoom} >\n    <input\n    type='text'\n    placeholder='Digite o códico da sala'\n    onChange={event => setRoomCode(event.target.value)}\n    value={roomCode}\n    />\n \n<Button type='submit' >\nEntrar na sala\n\n\n</Button>\n\n\n</form>\n\n</div>\n\n\n</main>\n\n\n</div>\n\n\n\n)\n\n}"]},"metadata":{},"sourceType":"module"}